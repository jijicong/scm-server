<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.trc.mapper.supplier.ISupplierMapper">
    <!--根据供应商的编码查询供应商-->
    <select id="selectSupplierNames" resultType="org.trc.domain.supplier.Supplier">
        SELECT supplier_code AS supplierCode,supplier_name AS supplierName from supplier WHERE supplier_code IN
        <foreach collection="array" index="index" item="item" close=")" open="(" separator=",">
            #{item}
        </foreach>
    </select>

    <select id="selectSupplierListByApply" resultType="org.trc.domain.supplier.Supplier">
          SELECT a.id AS id,a.supplier_code AS supplierCode,a.supplier_name AS supplierName,
          a.supplier_kind_code AS supplierKindCode,a.supplier_type_code AS supplierTypeCode
          FROM  supplier a
          <where>
              a.id NOT IN(select DISTINCT(b.supplier_id ) FROM apply_for_supplier b
              WHERE b.`status` IN(1,2))
              AND a.id IN
              <foreach collection="ids" index="index" item="item" close=")" open="(" separator=",">
                  #{item}
              </foreach>
          </where>
    </select>

    <select id="selectSupplierListCount" resultType="java.lang.Integer">
           SELECT COUNT(0)
           FROM supplier a
            <where>
                a.id NOT IN(select DISTINCT(b.supplier_id ) FROM apply_for_supplier b
                WHERE b.`status` IN(1,2))
                AND a.id IN
                <foreach collection="ids" index="index" item="item" close=")" open="(" separator=",">
                    #{item}
                </foreach>
            </where>
    </select>
</mapper>