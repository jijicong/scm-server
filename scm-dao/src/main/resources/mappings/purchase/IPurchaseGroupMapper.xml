<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.trc.mapper.purchase.IPurchaseGroupMapper">
    <!-- 查询某采购组下的无效状态的用户，用户采购组编辑页面的提示信息 -->
    <select id="findPurchaseGroupMemberStateById" resultType="org.trc.domain.impower.UserAccreditInfo">
        SELECT user_id AS userId,phone,`name` from user_accredit_info WHERE user_id IN(
        SELECT pgr.user_id from purchase_group_user_relation pgr WHERE purchase_group_code=
        (SELECT pg.`code` from purchase_group pg WHERE id=#{id})
        ) AND is_valid='0'
    </select>

</mapper>